import{d as V,i as Q,j as F,o as d,c as h,h as r,t as v,e as m,F as $,g as k,w as K,r as T,T as J,_ as te,k as L,b as se,l as ne,m as oe,n as re,p as w,q as O,u as ue,s as ie,v as U,x as b,y as ae,z as ce,A as S,B as le}from"./app.e5af0039.js";const fe={class:"result-item relative overflow-visible",flex:"~ col",text:"left",m:"b-4"},de={class:"flex justify-between items-center"},he=["href"],pe={class:"not-italic",text:"xs"},_e=["href"],ye={text:"xs"},me=["href"],Ee={class:"top-0 truncate"},ge=["innerHTML"],ve={key:1},Fe=r("div",{class:"inline-flex justify-start items-center border",p:"1",m:"1"},[r("div",{"i-ri-alert-line":""}),r("span",{m:"l-1"},"\u6211\u4EEC\u7684\u63A2\u6D4B\u5668\u5BF9\u8FD9\u4E2A\u5947\u602A\u7684\u7F51\u7AD9\u6CA1\u6709\u6548\u679C\uFF01")],-1),Re=[Fe],we={class:"reason-container absolute top-0 left-180 min-h-full justify-center hidden transition",w:"64",opacity:"0",flex:"~ col"},be={class:"search-reason",p:"l-2",text:"xs"},$e=V({__name:"ResultItem",props:{keywords:null,result:null},setup(e){const t=e,n=Q(),o=F(()=>{var s;const u=(s=n.query.q)==null?void 0:s.toString();return u!=null&&u.startsWith("site:")?u.split(" ").slice(1).join(" "):u}),i=(u,s)=>{let f=u.replace(/</g,"&lt;").replace(/>/g,"&gt;");return s.forEach(E=>{const R=new RegExp(E,"gi");f=f.replace(R,_=>`<em class="highlight">${_}</em>`)}),f},c=F(()=>new URL(t.result.\u7F51\u5740).hostname),a=F(()=>`site:${c.value}`),l=F(()=>{var u;return`/search?q=${a.value} ${(u=o.value)==null?void 0:u.trim()}`});return(u,s)=>(d(),h("div",fe,[r("span",de,[r("a",{href:e.result.\u7F51\u5740,target:"_blank",class:"truncate"},[r("cite",pe,v(e.result.\u7F51\u5740),1)],8,he),r("a",{href:m(l),class:"cursor-pointer related-info sese-link transition truncate"},[r("cite",ye,"\u5728 "+v(m(c))+" \u4E2D\u627E\u5230 "+v(e.result.\u76F8\u540C\u57DF\u540D\u4E2A\u6570)+" \u4E2A\u76F8\u5173\u9875\u9762",1)],8,_e)]),e.result.\u4FE1\u606F?(d(),h($,{key:0},[r("a",{href:e.result.\u7F51\u5740,target:"_blank",class:"text-lg text-blue-900 hover:underline dark:text-blue-500"},[r("h3",Ee,v(e.result.\u4FE1\u606F.\u6807\u9898),1)],8,me),r("p",{text:"sm",innerHTML:i(e.result.\u4FE1\u606F.\u63CF\u8FF0||e.result.\u4FE1\u606F.\u6587\u672C,e.keywords)},null,8,ge)],64)):(d(),h("div",ve,Re)),k(J,null,{default:K(()=>[r("div",we,[r("blockquote",be,[(d(!0),h($,null,T(e.result.\u539F\u56E0,(f,E)=>(d(),h("span",{key:E,class:"block"},v(E)+"\uFF1A"+v(f.toFixed(3)),1))),128))])])]),_:1})]))}});const Ce={},xe={class:"absolute loading-container flex justify-center items-center fixed inset-0",h:"screen",m:"auto"},Ae=r("div",{class:"spinner"},null,-1),ke=[Ae];function Te(e,t){return d(),h("div",xe,ke)}const Le=te(Ce,[["render",Te]]),Be="/rimo-touch-fish.png",je=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,Se=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Pe=/^["{[]|^-?[0-9][0-9.]{0,14}$/;function De(e,t){if(!(e==="__proto__"||e==="constructor"))return t}function Ne(e){if(typeof e!="string")return e;const t=e.toLowerCase();if(t==="true")return!0;if(t==="false")return!1;if(t==="null")return null;if(t==="nan")return NaN;if(t==="infinity")return 1/0;if(t!=="undefined"){if(!Pe.test(e))return e;try{return je.test(e)||Se.test(e)?JSON.parse(e,De):JSON.parse(e)}catch{return e}}}const qe=/#/g,Oe=/&/g,Ue=/=/g,M=/\+/g,Ie=/%5B/gi,He=/%5D/gi,Ve=/%5E/gi,Qe=/%60/gi,Ke=/%7B/gi,Je=/%7C/gi,Me=/%7D/gi,We=/%20/gi;function Ge(e){return encodeURI(""+e).replace(Je,"|").replace(Ie,"[").replace(He,"]")}function B(e){return Ge(e).replace(M,"%2B").replace(We,"+").replace(qe,"%23").replace(Oe,"%26").replace(Qe,"`").replace(Ke,"{").replace(Me,"}").replace(Ve,"^")}function A(e){return B(e).replace(Ue,"%3D")}function W(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function ze(e){return W(e.replace(M," "))}function Xe(e=""){const t={};e[0]==="?"&&(e=e.substr(1));for(const n of e.split("&")){const o=n.match(/([^=]+)=?(.*)/)||[];if(o.length<2)continue;const i=W(o[1]);if(i==="__proto__"||i==="constructor")continue;const c=ze(o[2]||"");t[i]?Array.isArray(t[i])?t[i].push(c):t[i]=[t[i],c]:t[i]=c}return t}function Ye(e,t){return(typeof t=="number"||typeof t=="boolean")&&(t=String(t)),t?Array.isArray(t)?t.map(n=>`${A(e)}=${B(n)}`).join("&"):`${A(e)}=${B(t)}`:A(e)}function Ze(e){return Object.keys(e).map(t=>Ye(t,e[t])).join("&")}const et=/^\w+:(\/\/)?/,tt=/^\/\/[^/]+/;function st(e,t=!1){return et.test(e)||t&&tt.test(e)}const nt=/\/$|\/\?/;function j(e="",t=!1){return t?nt.test(e):e.endsWith("/")}function ot(e="",t=!1){if(!t)return(j(e)?e.slice(0,-1):e)||"/";if(!j(e,!0))return e||"/";const[n,...o]=e.split("?");return(n.slice(0,-1)||"/")+(o.length?`?${o.join("?")}`:"")}function rt(e="",t=!1){if(!t)return e.endsWith("/")?e:e+"/";if(j(e,!0))return e||"/";const[n,...o]=e.split("?");return n+"/"+(o.length?`?${o.join("?")}`:"")}function ut(e=""){return e.startsWith("/")}function it(e=""){return(ut(e)?e.substr(1):e)||"/"}function at(e,t){if(lt(t))return e;const n=ot(t);return e.startsWith(n)?e:dt(n,e)}function ct(e,t){const n=G(e),o={...Xe(n.search),...t};return n.search=Ze(o),ht(n)}function lt(e){return!e||e==="/"}function ft(e){return e&&e!=="/"}function dt(e,...t){let n=e||"";for(const o of t.filter(ft))n=n?rt(n)+it(o):o;return n}function G(e="",t){if(!st(e,!0))return t?G(t+e):I(e);const[n="",o,i=""]=(e.replace(/\\/g,"/").match(/([^:/]+:)?\/\/([^/@]+@)?(.*)/)||[]).splice(1),[c="",a=""]=(i.match(/([^/?#]*)(.*)?/)||[]).splice(1),{pathname:l,search:u,hash:s}=I(a);return{protocol:n,auth:o?o.substr(0,o.length-1):"",host:c,pathname:l,search:u,hash:s}}function I(e=""){const[t="",n="",o=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:n,hash:o}}function ht(e){const t=e.pathname+(e.search?(e.search.startsWith("?")?"":"?")+e.search:"")+e.hash;return e.protocol?e.protocol+"//"+(e.auth?e.auth+"@":"")+e.host+t:t}class pt extends Error{constructor(){super(...arguments),this.name="FetchError"}}function _t(e,t,n){let o="";e&&n&&(o=`${n.status} ${n.statusText} (${e.toString()})`),t&&(o=`${t.message} (${o})`);const i=new pt(o);return Object.defineProperty(i,"request",{get(){return e}}),Object.defineProperty(i,"response",{get(){return n}}),Object.defineProperty(i,"data",{get(){return n&&n._data}}),i}const yt=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function H(e="GET"){return yt.has(e.toUpperCase())}function mt(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const Et=new Set(["image/svg","application/xml","application/xhtml","application/html"]),gt=/^application\/(?:[\w!#$%&*`\-.^~]*\+)?json(;.+)?$/i;function vt(e=""){if(!e)return"json";const t=e.split(";").shift();return gt.test(t)?"json":Et.has(t)||t.startsWith("text/")?"text":"blob"}const Ft=new Set([408,409,425,429,500,502,503,504]);function z(e){const{fetch:t,Headers:n}=e;function o(a){if(a.options.retry!==!1){const u=typeof a.options.retry=="number"?a.options.retry:H(a.options.method)?0:1,s=a.response&&a.response.status||500;if(u>0&&Ft.has(s))return i(a.request,{...a.options,retry:u-1})}const l=_t(a.request,a.error,a.response);throw Error.captureStackTrace&&Error.captureStackTrace(l,i),l}const i=async function(l,u={}){const s={request:l,options:{...e.defaults,...u},response:void 0,error:void 0};s.options.onRequest&&await s.options.onRequest(s),typeof s.request=="string"&&(s.options.baseURL&&(s.request=at(s.request,s.options.baseURL)),s.options.params&&(s.request=ct(s.request,s.options.params)),s.options.body&&H(s.options.method)&&mt(s.options.body)&&(s.options.body=typeof s.options.body=="string"?s.options.body:JSON.stringify(s.options.body),s.options.headers=new n(s.options.headers),s.options.headers.has("content-type")||s.options.headers.set("content-type","application/json"),s.options.headers.has("accept")||s.options.headers.set("accept","application/json"))),s.response=await t(s.request,s.options).catch(async E=>(s.error=E,s.options.onRequestError&&await s.options.onRequestError(s),o(s)));const f=(s.options.parseResponse?"json":s.options.responseType)||vt(s.response.headers.get("content-type")||"");if(f==="json"){const E=await s.response.text(),R=s.options.parseResponse||Ne;s.response._data=R(E)}else s.response._data=await s.response[f]();return s.options.onResponse&&await s.options.onResponse(s),s.response.ok||s.options.onResponseError&&await s.options.onResponseError(s),s.response.ok?s.response:o(s)},c=function(l,u){return i(l,u).then(s=>s._data)};return c.raw=i,c.create=(a={})=>z({...e,defaults:{...e.defaults,...a}}),c}const X=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),Rt=X.fetch||(()=>Promise.reject(new Error("[ohmyfetch] global.fetch is not supported!"))),wt=X.Headers,bt=z({fetch:Rt,Headers:wt}),$t=bt.create({baseURL:"https://api2sese.yunyoujun.cn/",retry:0,async onResponse({response:e}){const{useToast:t}=await L(()=>import("./app.e5af0039.js").then(o=>o.H),["assets/app.e5af0039.js","assets/index.6f44fe32.css"]),n=t();typeof e._data=="string"&&n.error("\u574F\u4E86\uFF01\u670D\u52A1\u5668\u574F\u4E86\uFF01\u5FEB\u53BB\u6253\u8389\u6CAB\u9171\uFF01")},async onResponseError({response:e}){const{useToast:t}=await L(()=>import("./app.e5af0039.js").then(o=>o.H),["assets/app.e5af0039.js","assets/index.6f44fe32.css"]),n=t();n.error(`${e.status} ${e.statusText}`),e._data&&n.error(e._data.\u4FE1\u606F)}});async function Ct(e){const{useToast:t}=await L(()=>import("./app.e5af0039.js").then(c=>c.H),["assets/app.e5af0039.js","assets/index.6f44fe32.css"]),n=t(),o={q:e.q||"",slice:e.slice||"0:10"};return await $t("/search",{params:o}).catch(c=>{console.error(c),n.error("\u574F\u4E86\uFF01\u670D\u52A1\u5668\u574F\u4E86\uFF01\u5FEB\u53BB\u6253\u8389\u6CAB\u9171\uFF01")})}const xt={p:"2",h:"screen"},At={p:"l-2 lt-sm:l-0",class:"relative flex justify-start items-center lt-sm:mt-6"},kt=["src"],Tt=r("div",{"i-ri-heart-line":""},null,-1),Lt=[Tt],Bt={key:0,m:"l-24 lt-sm:l-0",p:"2",class:"max-w-2xl"},jt={text:"left sm gray-500",m:"b-2"},St={key:1,text:"left",m:"t-8"},Pt=S(" \u627E\u4E0D\u5230\u548C\u60A8\u67E5\u8BE2\u7684\u300C"),Dt={text:"red-500"},Nt=S("\u300D\u76F8\u7B26\u7684\u5185\u5BB9\u6216\u4FE1\u606F\uFF01 "),qt={m:"t-8",text:"left"},Ot=S(" \u5EFA\u8BAE\uFF1A "),Ut={p:"4"},It={class:"list-circle"},Ht=["href","title"],Vt=r("img",{src:Be,alt:"\u6478\u9C7C"},null,-1),Qt={key:2,m:"t-6 b-4",class:"pagination-container flex justify-center items-center"},Kt=r("div",{"i-ri-arrow-left-line":""},null,-1),Jt=[Kt],Mt=["onClick"],Wt=r("div",{"i-ri-arrow-right-line":""},null,-1),Gt=[Wt],zt={key:1,m:"t-10"},Yt=V({__name:"search",setup(e){var D,N;const{t}=se(),{enter:n}=ne(),o=Q(),i=oe(),c=re(),a=F(()=>{var g;return((g=o.query.q)==null?void 0:g.toString())||""}),l=w(a.value);O(()=>a.value,()=>{c.setNewKeyword(a.value),l.value=a.value});const u=w((D=o.query.slice)==null?void 0:D.toString()),s=w(10),f=w(),E=F(()=>f.value&&f.value.\u5206\u8BCD||[l.value]);ue({title:F(()=>`${a.value} - ${t("sese.title")}`)});const R=async()=>{c.isLoading=!0;const g=await Ct({q:l.value,slice:u.value});c.isLoading=!1,f.value=g};ie(async()=>{R()});const _=w(u.value?parseInt((N=u.value)==null?void 0:N.split(":")[0])/s.value+1:1),C=g=>{_.value=g,u.value=`${(_.value-1)*s.value}:${_.value*s.value}`,i.push({path:"/search",query:{q:l.value,slice:u.value}}),R()};O(()=>c.savedKeyword,()=>{R()});const x=F(()=>{if(f.value&&f.value.\u603B\u6570){const g=Math.ceil(f.value.\u603B\u6570/s.value);return g<=10?g:10}else return 0}),P=()=>{_.value=1,u.value=`0:${s.value}`,n(l.value)};return(g,y)=>{const Y=Le,Z=le,ee=$e;return d(),h("div",xt,[k(J,null,{default:K(()=>[m(c).isLoading?(d(),U(Y,{key:0})):b("",!0)]),_:1}),r("div",At,[r("a",{class:"cursor-pointer inline-flex justify-center lt-sm:absolute -top-5 left-5",m:"r-3 b-1",onClick:y[0]||(y[0]=()=>{m(i).push("/")})},[r("img",{class:"w-16 filter drop-shadow",src:m(ae),alt:"Rimo And XiaoYun"},null,8,kt)]),k(Z,{modelValue:l.value,"onUpdate:modelValue":y[1]||(y[1]=p=>l.value=p),class:"inline-flex",enter:()=>{P()}},null,8,["modelValue","enter"]),r("button",{m:"l-2",p:"2",class:"icon-btn flex justify-center items-center border rounded rounded-full !outline-none",onClick:y[2]||(y[2]=p=>P())},Lt)]),f.value?(d(),h("div",Bt,[r("div",jt," \u627E\u5230\u7EA6 "+v(f.value.\u603B\u6570)+" \u4E2A\u7ED3\u679C ",1),f.value.\u603B\u6570?(d(!0),h($,{key:0},T(f.value.\u7ED3\u679C,(p,q)=>(d(),U(ee,{key:q,keywords:m(E),se:"",result:p},null,8,["keywords","result"]))),128)):(d(),h("div",St,[Pt,r("strong",Dt,v(l.value),1),Nt,r("p",{class:"cursor-pointer hover:underline",text:"sm",m:"t-4",onClick:y[3]||(y[3]=p=>m(i).go(-1))}," \u8FD4\u56DE\u4E0A\u4E00\u9875 "),r("p",qt,[Ot,r("ul",Ut,[r("li",It,[r("a",{class:"hover:underline",href:`https://www.google.com/search?q=${l.value}`,target:"_blank",title:l.value}," \u4F7F\u7528 Google \u641C\u7D22 ",8,Ht)])]),Vt])])),m(x)?(d(),h("div",Qt,[_.value>1?(d(),h("span",{key:0,class:"page-link",text:"sm",p:"r-1",m:"r-1",onClick:y[4]||(y[4]=p=>C(_.value-1))},Jt)):b("",!0),(d(!0),h($,null,T(m(x),p=>(d(),h("span",{key:p,p:"1",m:"1",class:ce(["pagination-page",_.value===p?"text-black dark:text-white":"text-blue-600 dark:text-blue-500 cursor-pointer hover:underline"]),text:"sm",onClick:q=>_.value===p?null:C(p)},v(p),11,Mt))),128)),_.value<m(x)?(d(),h("span",{key:1,class:"page-link",text:"sm",p:"l-1",m:"l-1",onClick:y[5]||(y[5]=p=>C(_.value+1))},Gt)):b("",!0)])):b("",!0)])):m(c).isLoading?b("",!0):(d(),h("div",zt," \u670D\u52A1\u5668\u4E0D\u2026\u2026\u4E0D\u884C\u4E86\u2026\u2026 "))])}}});export{Yt as default};
